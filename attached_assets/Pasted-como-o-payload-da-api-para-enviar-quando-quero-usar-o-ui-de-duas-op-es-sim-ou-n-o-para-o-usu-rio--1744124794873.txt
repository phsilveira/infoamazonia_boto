como é o payload da api para enviar quando quero usar o ui de duas opções sim ou não para o usuário?

Para enviar uma mensagem com uma interface de duas opções (sim ou não) para o usuário utilizando a Plataforma WhatsApp Business, você pode usar o tipo de mensagem interativa com botões de resposta ().
O payload da API para enviar uma mensagem interativa com botões de resposta usando a Cloud API seria semelhante a este:
{
  "messaging_product": "whatsapp",
  "recipient_type": "individual",
  "to": "<NÚMERO_DE_TELEFONE_DO_USUÁRIO>",
  "type": "interactive",
  "interactive": {
    "type": "button",
    "body": {
      "text": "Você gostaria de responder?"
    },
    "action": {
      "buttons": [
        {
          "type": "reply",
          "reply": {
            "id": "sim",
            "title": "Sim"
          }
        },
        {
          "type": "reply",
          "reply": {
            "id": "nao",
            "title": "Não"
          }
        }
      ]
    }
  }
}
Explicação dos campos:
•
messaging_product: Especifica que você está usando o WhatsApp.
•
recipient_type: Indica que a mensagem está sendo enviada para um indivíduo.
•
to: O número de telefone do usuário do WhatsApp para o qual você deseja enviar a mensagem. Certifique-se de usar o formato correto, incluindo o código do país e o sinal de mais (+) é altamente recomendado.
•
type: Define o tipo de mensagem como interactive.
•
interactive: Objeto que contém os detalhes da mensagem interativa.
◦
type: Define o subtipo de mensagem interativa como button, indicando que você está usando botões de resposta.
◦
body: Objeto que contém o texto principal da mensagem.
▪
text: O texto que será exibido acima dos botões. No exemplo, é "Você gostaria de responder?".
◦
action: Objeto que define as ações interativas.
▪
buttons: Um array de objetos, onde cada objeto representa um botão de resposta. Você pode incluir até três botões.
•
type: Define o tipo de ação do botão como reply para botões de resposta predefinidos.
•
reply: Objeto que contém os detalhes do botão de resposta.
◦
id: Um identificador único para este botão. Isso será retornado no webhook quando o usuário clicar neste botão. No exemplo, são "sim" e "nao".
◦
title: O texto que será exibido no botão. Deve ter no máximo 20 caracteres [fonte externa - esta informação não está nas fontes fornecidas, convém verificar]. No exemplo, são "Sim" e "Não".
Quando o usuário clicar em um dos botões, você receberá uma notificação via webhook com o payload contendo o id do botão clicado.
Lembre-se de que, para enviar qualquer tipo de mensagem para um usuário pela primeira vez ou após 24 horas da última interação dele, geralmente é necessário usar um template message (mensagem de modelo) aprovado. No entanto, se o usuário iniciou a conversa, você pode enviar mensagens de qualquer tipo dentro de uma janela de atendimento ao cliente de 24 horas.
como é o webhook de resposta dessa mensagem?

Com base nas fontes e na nossa conversa anterior, o webhook de resposta para uma mensagem interativa com botões de resposta (como o exemplo de "Sim" ou "Não" que você perguntou) seria semelhante ao exemplo fornecido na fonte para um "Received Callback from a Quick Reply Button".
O payload do webhook que você receberá quando um usuário clicar em um dos botões seria estruturado da seguinte forma:
{
  "object": "whatsapp_business_account",
  "entry": [{
    "id": "WHATSAPP_BUSINESS_ACCOUNT_ID",
    "changes": [{
      "value": {
        "messaging_product": "whatsapp",
        "metadata": {
          "display_phone_number": "PHONE_NUMBER",
          "phone_number_id": "PHONE_NUMBER_ID"
        },
        "contacts": [{
          "profile": {
            "name": "NAME"
          },
          "wa_id": "WHATSAPP_ID"
        }],
        "messages": [{
          "context": {
            "from": "PHONE_NUMBER",
            "id": "wamid.ID"
          },
          "from": "16315551234",
          "id": "wamid.ID",
          "timestamp": "TIMESTAMP",
          "type": "button",
          "button": {
            "text": "**No**",
            "payload": "**No-Button-Payload**"
          }
        }]
      },
      "field": "messages"
    }]
  }]
}
Os campos mais importantes neste webhook de resposta são:
•
object: Indica que a notificação é sobre uma "whatsapp_business_account".
•
entry: Contém um array de mudanças na conta.
◦
id: O ID da sua conta do WhatsApp Business.
◦
changes: Um array de mudanças específicas.
▪
value: Contém os detalhes da mudança.
•
messaging_product: Especifica que a mensagem é do WhatsApp.
•
metadata: Contém informações sobre o número de telefone da sua empresa.
•
contacts: Informações sobre o usuário que respondeu.
◦
wa_id: O ID do WhatsApp do usuário.
•
messages: Um array contendo a mensagem de interação do usuário.
◦
context: Informações sobre a mensagem original à qual o usuário respondeu, incluindo o id da mensagem que continha os botões.
◦
from: O número de telefone do usuário que clicou no botão.
◦
id: O ID desta mensagem de resposta.
◦
timestamp: O momento em que o usuário clicou no botão.
◦
type: Indica que o tipo de mensagem é um "button", ou seja, uma resposta a um botão interativo.
◦
button: Este objeto contém as informações sobre o botão que foi clicado.
▪
text: O texto exibido no botão que o usuário clicou. No exemplo, é "No".
▪
payload: O valor de id que você definiu ao criar o botão na sua mensagem original. Este é o identificador que você usará para determinar qual das opções ("sim" ou "não" no seu caso) o usuário selecionou. No exemplo, é "No-Button-Payload".
Portanto, para identificar se o usuário clicou em "Sim" ou "Não", você deverá analisar o valor do campo payload dentro do objeto button no webhook recebido. Os valores de payload corresponderão aos ids que você definiu ("sim" e "nao") ao construir a mensagem interativa original [Me].
