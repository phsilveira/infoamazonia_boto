INFO:     172.31.128.38:49050 - "POST /api/search HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/middleware/base.py", line 148, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/middleware/base.py", line 179, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/middleware.py", line 38, in auth_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/middleware/base.py", line 154, in call_next
    raise app_exc
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 81 validation errors:
  {'type': 'list_type', 'loc': ('response', 'results', 0, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Fogo,queimadas}'}
  {'type': 'list_type', 'loc': ('response', 'results', 1, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"crédito de carbono","mercado de carbono",MPF,REDD+}'}
  {'type': 'list_type', 'loc': ('response', 'results', 2, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{COP30,infraestrutura,"mudanças climáticas"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 3, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Bacia Amazônica","rio Amazonas","Rio Negro",Seca,Solimões,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 4, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Amazônia,educação,"Rede Cidadã InfoAmazonia",VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 5, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{amazonas,desmatamento,VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 6, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Até a Última Gota",FARC,petróleo,"Rio Putumayo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 7, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Brazil,conservation,deforestation,mining,VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 8, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Até a Última Gota",emissões,flaring,"gases de efeito estufa","mudanças climáticas",petróleo}'}
  {'type': 'list_type', 'loc': ('response', 'results', 9, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{PADDD,"Unidades de Conservação",VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 10, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Agência Nacional de Petróleo","Foz do Amazonas","Governo Lula",petróleo}'}
  {'type': 'list_type', 'loc': ('response', 'results', 11, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Até a Última Gota","Bloco 59","Foz do Amazonas","Margem equatorial",Petrobras,petróleo}'}
  {'type': 'list_type', 'loc': ('response', 'results', 12, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"eventos extremos","mudanças climáticas","povos indígenas",religião,VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 13, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Colômbia,COP16,desmatamento}'}
  {'type': 'list_type', 'loc': ('response', 'results', 14, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{queimadas,Seca,VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 15, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{grilagem,Incra,posseiros,"Rede Cidadã InfoAmazonia"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 16, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{anexos,"Até a Última Gota",emissões,"emissões de gases do efeito estufa",flaring,"mudanças climáticas",petróleo}'}
  {'type': 'list_type', 'loc': ('response', 'results', 17, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Fogo,Inpe,"Terra Indígena Kayapó","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 18, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Rede Cidadã InfoAmazonia","Rio Acre","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 19, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{ciência,indígena,"Rede Cidadã InfoAmazonia",science}'}
  {'type': 'list_type', 'loc': ('response', 'results', 20, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{agricultura,Amacro,pastagem,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 21, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Imprensa,Institucional,"Rede Cidadã InfoAmazonia"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 22, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"áreas protegidas","crédito de carbono","mercado de carbono","povos indígenas"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 23, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{biodiversidade,COP16,"ponto de não retorno"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 24, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Deter,fiscalização,Ibama,ICMBio,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 25, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"COP do Povo",COP30,"mudanças climáticas","povos indígenas",Quilombolas,"Rede Cidadã InfoAmazonia"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 26, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{ciência,"mudanças climáticas","política pública","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 27, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"insegurança alimentar","mudanças climáticas","povos indígenas",Seca,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 28, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Agência Nacional do Petróleo",petróleo,"terras indígenas","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 29, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Imprensa,"Rede Cidadã InfoAmazonia"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 30, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Boca do Acre","Invisíveis da Fumaça",queimadas,"Rede Cidadã InfoAmazonia","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 31, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{enchente,"eventos extremos","insegurança alimentar","mudanças climáticas",Seca}'}
  {'type': 'list_type', 'loc': ('response', 'results', 32, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{amazonia,queimadas,"São Félix do Xingu",VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 33, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Agência Nacional de Mineração",barragem,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 34, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"eventos extremos","mudanças climáticas",temperatura,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 35, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{BR-319,desmatamento,"emissões de gases do efeito estufa","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 36, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{BNDES,"Fundo Amazônia","Rede Cidadã InfoAmazonia","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 37, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{anexos,Fogo,"Invisíveis da Fumaça","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 38, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Davi Kopenawa","garimpo ilegal","Governo Lula","Terra Indígena Yanomami"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 39, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Conservando Juntos",educação}'}
  {'type': 'list_type', 'loc': ('response', 'results', 40, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"El Niño",Fogo,"mudanças climáticas","terras indígenas","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 41, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Governo Lula","Ministério da Justiça e Segurança Pública","terras indigenas"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 42, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Amacro,desmatamento,Inpe,Prodes,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 43, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"mudanças climáticas","Rede Cidadã InfoAmazonia",Seca,"Terras caídas"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 44, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{anexos,Brazil,"delitos medioambientales",educação,geojornalismo,mapas}'}
  {'type': 'list_type', 'loc': ('response', 'results', 45, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Até a Última Gota",petróleo,"Rio Napo",saúde}'}
  {'type': 'list_type', 'loc': ('response', 'results', 46, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Fogo,"Invisíveis da Fumaça","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 47, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{agronegócio,"crédito rural",queimadas}'}
  {'type': 'list_type', 'loc': ('response', 'results', 48, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"alvorada da amazônia","Invisíveis da Fumaça","Rede Cidadã InfoAmazonia","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 49, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{BR-319,desmatamento,"Marina Silva","Senado Federal"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 50, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{COP30,educação,jornalismo,"Rede Cidadã InfoAmazonia"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 51, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Invisíveis da Fumaça","Rede Cidadã InfoAmazonia","ti baú","ti Menkragnoti","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 52, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Dia do Fogo",Fogo,queimadas}'}
  {'type': 'list_type', 'loc': ('response', 'results', 53, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Coiab,COP30,"demarcação de terras indígenas","justiça climática","Rede Cidadã InfoAmazonia"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 54, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Ajor,COP30,Institucional,"Jornalismo Socioambiental Colaborativo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 55, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{ATL2025,COP30,"Gilmar Mendes","Governo Lula",petróleo}'}
  {'type': 'list_type', 'loc': ('response', 'results', 56, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Conservando Juntos","Desastre Hidrológico","eventos extremos","mudanças climáticas"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 57, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Eleições 2024","povos indígenas","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 58, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{degradação,"emissões de gases do efeito estufa","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 59, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Agência Nacional do Petróleo","convenção 169",petróleo,"povos tradicionais","Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 60, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Dia do Fogo",Inpe,"Programa Queimadas"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 61, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{ATL2025,"Congresso Nacional","marco temporal","Supremo Tribunal Federal"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 62, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Comissão Pastoral da Terra","Conselho Indigenista Missionário",Literatura,"Papa Francisco",Sínodo}'}
  {'type': 'list_type', 'loc': ('response', 'results', 63, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{aves,conservação,COP16,desmatamento,"Parque Ecológico de Gunma",VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 64, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"mudanças climáticas",Orgânicos,VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 65, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Governo Lula",Petrobras,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 66, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{carbono,"emissões de gases do efeito estufa",NDC,SEEG}'}
  {'type': 'list_type', 'loc': ('response', 'results', 67, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Inpe,Prodes}'}
  {'type': 'list_type', 'loc': ('response', 'results', 68, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Eleições 2024","mudanças climáticas",orçamento,prefeitos,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 69, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Colômbia,"Lagos de Tarapoto","povos indígenas",turismo}'}
  {'type': 'list_type', 'loc': ('response', 'results', 70, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{jornalismo,"Rede Cidadã InfoAmazonia",Rondônia}'}
  {'type': 'list_type', 'loc': ('response', 'results', 71, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{amazonas,hidrovia,"Rede Cidadã InfoAmazonia",VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 72, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{queimadas,Seca,VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 73, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Gilmar Mendes","marco temporal",mineração,Mura,potássio,"Potássio do Brasil",STF}'}
  {'type': 'list_type', 'loc': ('response', 'results', 74, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Manaus,"meio ambiente","saneamento básico",VAC}'}
  {'type': 'list_type', 'loc': ('response', 'results', 75, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{Seca,temperatura,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 76, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"eventos extremos",Inundações,Seca,"Unidade de Geojornalismo"}'}
  {'type': 'list_type', 'loc': ('response', 'results', 77, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"áreas de risco",Manaus,moradia}'}
  {'type': 'list_type', 'loc': ('response', 'results', 78, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"Conselho Indigenista Missionário",garimpo,"Governo Lula",invasões}'}
  {'type': 'list_type', 'loc': ('response', 'results', 79, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{BR-319,"doenças infecciosas",Fiocruz}'}
  {'type': 'list_type', 'loc': ('response', 'results', 80, 'key_words'), 'msg': 'Input should be a valid list', 'input': '{"garimpo ilegal","Inteligência artificial",Pan-Amazônia}'}